<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	</head>
	<body>
	<img id='testImg' />
		<script type="text/javascript">
function clsImage(backdata)
{
    var img = new Image();
//属性
    this.img = img;
//获取浏览器
    var appname = navigator.appName.toLowerCase();
    if (appname.indexOf("netscape") == -1)
    {
       //IE
        img.onreadystatechange = function () {
            if(img.readyState == "complete")
            {
            
                backdata(img);
                document.getElementById("testImg").src = img.src;
                document.getElementById("testImg").style.visibility = "visible";
            }
        };
    }
else
{
       //FF
        img.onload = function () {
            if(img.complete == true)
            {
            	
                backdata(img);
                document.getElementById("testImg").src = img.src;
                document.getElementById("testImg").style.visibility = "visible";
            }
        }
    }
}
//为clsImage类增加方法
clsImage.prototype.getimg = function (url)
{
    this.img.src = url;
}

function getdata(obj)
{
	endtime = new Date();
    alert("图片加载时间：" + (endtime - begintime) / 1000 + "秒！");
}

var img = new clsImage(getdata);
var begintime = new Date();
img.getimg(" http://blog.sfruc.edu.cn/images/blog_sfruc_edu_cn/mxh/6/o_762_1024x768.jpg");
//document.getElementById('testImg').src = img	;
//document.body.appendChild(img);
		</script>
	</body>
</html>
